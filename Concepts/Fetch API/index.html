<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fetch API</title>
<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: sans-serif;
    }
    body {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        background-color: darkgray;
    }
    .main {
        border: 2px solid black;
        border-radius: 25px;
        height: 400px;
        width: 300px;
        padding: 25px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 25px;
        text-align: center;
        background-color: lightblue;
        position: fixed;
    }
    #pokemonSprite {
        display: none;
    }
</style>
</head>
<body>
    
    <div class="main">
        <input type="text" id="pokemonName" placeholder="Enter Pokemon Name">
        <button onclick="fetchData()">Fetch Pokemon</button>
        <br>
        <img src="" alt="Pokemon Sprite" id="pokemonSprite">
        <p id="errorText">Search for sprites!</p>
    </div>


<script>
    // fetch = function used for making HTTP requests or fetch resources.
    // JSON style data, iamges, files
    // simplifies async data fetching in JavaScript and
    // used for interacting with APIs to retreive an send data
    // async over the web
    // feetch (url, {options})

    // this is one way to do it

    //fetch("https://pokeapi.co/api/v2/pokemon/pikachu")
    //.then(response => {
    //    if(!response.ok){
    //        throw new Error("Could not fetch resource");
    //     }
    //    return response.json();
    //})
    //.then(data => console.log(data))
    //.catch(error => console.log(error));

    // if you want to use async and await (I think this is more readable)

    async function fetchData(){

        try{

            const pokemonName = document.getElementById("pokemonName").value.toLowerCase();
            const response = await fetch(`https://pokeapi.co/api/v2/pokemon/${pokemonName}`);

            if(!response.ok){
                throw new Error("Could not fetch resource");
            }

            const data = await response.json();
            const pokemonSprite = data.sprites.front_default;
            const imgElement = document.getElementById("pokemonSprite");

            imgElement.src = pokemonSprite;
            imgElement.style.display = "block";
        }
        catch(error){
            const errorText = document.getElementById("errorText");
            errorText.textContent = `That is not a Pokemon`;
        }
    }
</script>
</body>
</html>